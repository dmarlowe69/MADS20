KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK
BYTE 'BYE',$0D,$00;*********************************; DISABLE WEDGE (@Q);; REMOVE WEDGE FROM CHRGET BY; COPYING OVER THREE BYTE PATCH; WITH CORRECT BYTES FROM ROM;;*********************************QUITER LDX #$02        ;SET COUNTERROM    LDA CKKKKKKKKKHRCPY,X    ;GET ROM BYTE       STA CHRGET,X    ;PUT IN CHRGET       DEX             ;COUNT-1       BPL ROM         ;MOVE 3 BYTES;             LDX #BYE-BANNER       JSR STMSG;      JMP BASSFT      ;BACK TO BASIC;********************************.KKKKKKKKK ENDR STMSG;      JMP BASSFT      ;BACK TO BASIC;********************************.END      LDX #BYE-BANNER       JSR STMSG;      JMP BASSFT      ;BACK TO BASIC;********************************.END
33,$29,$AA,$32,$35 .BYTE $36,$AC,$C2,$28,$34,$34,$29,$3A,$97,$41 .BYTE $AA,$35,$38,$39,$2C,$44,$3A,$97,$41,$AA .BYTE $36,$32,$31,$2C,$44,$3A,$97,$41,$AA,$36 .BYTE $36,$37,$2C,$44,$3A,$97,$41,$AA,$36,$38 .BYTE $33,$2C,$44 .BYTE $00;9 SYSA+266:NEW ;18120119040100992293112020202020205649432057454447450004D6;18121934040200992211202020425920444156494420412E20484F0512;1812314F4B0051040300992211203E20202020202020204449534B04A2;18124920535441545553006D0404009922204020202020202020200507;181261204F5226ACC2283434293A9741AA3538390928;1812D92C443A9741AA3632312C443A9741AA3636372C443A9741AA08C3;1812F13638332C4400040509009E41AA3236363AA2000000EAEAEA07FF;181309EAEAA53738E93385378533A538E90185388534A033A52BA60B32;1813212CE8E8E885228623A537A638E885248625A69C;181399EAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEA16B4;1813B1EAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEA16CC;1813C9EAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEA16E4;1813E1EAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEA16FC;1813F9EAEFB850F220AEFFB8501F847AA90820B40C7E;181471FFA96F2096FF20A5FFC90DF0062042E7B850F32042E720AB0D51;181489FF4C7900C8B17AD0FB8898A201A00220BDFFA208A59BD03E0D70;1814A1A90EA06020BAFF20C0FFA90820B4FFA9602096FFA90085900D3C;1814B9A00384B720A5FF85B0A490D01B20A5F '5FF0BFD;0315314C95E1020B;000023002381471FFA96F2096FF20A5FFC90DF0062042E7B850F32042E720AB0D51;181489FF4C7900C8B17AD0FB8898A201A00220BDFFA208A59BD03E0D70;1814A1A90EA06020BAFF20C0FFA90820B4FFA9602096FFA90085900D3C;1814B9A00384B720A5FF85B0A490D01B20A5F "      VIC WEDGE 4 "   BY DAVID A. HOOK Q " >        DISK STATUS m " @         OR COMMAND  " >$       DIRECTORY":" @$  " /FILE    LOAD  "DEVICE  8";D  A(43)256(44):A589,D:A621,D:A667,D:A683,D 	 Az{6/z({" z>@	/Uz,$JLy Ly  o z z P Pz o   BP B Ly z >`   `      @1  %    JSR TKSA        ;SEND SEC;ERR1 JSR ACPTR   ;GET BYTE CMP #$0D        ;IS IF CR? BEQ ERR2        ;IF SO DONE JSR PRT         ;PRINT CHAR JMP ERR1        ;NEXT BYTE;ERR2 JSR PRT     ;PRINT CR JSR UNTLK       ;UNTALK DEVICEEEXIT JMP CHRGOT ;RETU ;********************************BANNER .BYTE $93 ; CLEAR SCREEN.BYTE $0D,$0D.BYTE '   VIC  DOS MANAGER',$0D.BYTE '    V4.1/071382',$0D,$0D.BYTE '  (C) 1982 COMMODORE',$0D.BYTE '   BUSINESS MACHINES',$0D,$00;*********************************BYE . .WORD $0504 .WORD $0009 .BYTE $9E,$41,$AA,$32,$36,$36,$3A,$A2 .BYTE $00 .WORD $0000;*********************************; CODE TO PROTECT WEDGE FROM BASIC; BY ADJUSTING BASIC RAM TO AREA; PAST WEDGE;*********************************.LIB MOVBASICE0434F4D4D414E44008F040500992211203E2420200591;18127920202020204449524543544F5259223A992220402400A504063C;1812910600992211202F46494C45202020204C4F414400BD0407000564;1812A9852211114445564943452020389D9D9D223B4400F7040800073F;1812C141B2C228343329AA32353201B1229124880B29;181339D0F9CAF002300CB1229124C625C623A000F0E8A94C8573A40C8A;18135137A638C8D001E88474867560EAEAEAEAEAEAEAEAEAEAEAEA115D;181369EAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEA1684;181381EAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEAEA1AEAEAEAEAEAEAEAE67AD002E67B869BBABD0101C98CD011B0;18141136BD0201C9C4D02FA57AD028A57BC902D022A000849BB17A0B9D;181429C93EF00DC940F009C8859BC92FF055D00BC8B17AF02CC9240D57;181441F04AD0084C7900A69B4C7900A90820B1FFA96F2093FFE67A0BF5;181459A000B17AF00620A8FF85B1A490D012A4B70E46;1814D188D0E7A6B0A5B120CDDDA920D006D040D031D0D620D2FF200F19;1814E9A5FFA690D025C900F01820D2FF20E1FFF01920E4FFF0E8C91053;18150120D0E420E4FFF0FBD0DDA90D20D2FFA002D0CF20CCFFA90E0F27;18151920C3FF68684C67E4A90EA00020BAFFA900A62BA42C20D#$00       BEQ XX070B       JSR CHROUT       JSR STOP       BEQ ENDER;********************************       JSR GETIN       BEQ XX06E8       CMP #$20      ;' '       BNE XX06E8XX0704 JSR GETIN       BEQ XX0704       BNE XX06E8XX070B LDA #$0266:   783738843+,"#78$%"$0"$%# Ls78tu` <      hhLg   +, L0"$%# Ls78tu`OM SERIAL BUS; AND PRINT THEM TO THE SCREEN; UNTILL A CARRIDGE RETURN IS; RECEIVED THEN UNTALK DEVICE;;*********************************ERROR LDA FA     ;GET DEVICE JSR TALK        ;TALK DEVICE LDA #$0F+$60    ;SEC+$60 STA SA          ;PLACE SEC	RN;********************************; PRINT STARTUP BANNER;********************************PRMESS LDX #$00STMSG  LDA BANNER,X       BEQ DONE       JSR CHROUT       INX       BNE STMSGDONE   RTS;********************************; STARTUP BANNER .ASM;*********************************; MAIN BODY OF CODE;*********************************.FIL DOS41.ASM;*********************************.END*********************.ENDD;XX0665 JSR UNLSN       CLV        BVC XX068A;XX066B STY TXTPTR       L
.PAGE 'DOS 4.1E DISK WEDGE'.OPT LIST;*********************************;* = $0401   ; 3K EXPANSION;* = $1001   ; NO EXPANSION* = $1201    ; 32K EXPANSION;* = $BC00   ; SYS 48128;*********************************;;       DOS 4.1E DISK WEDGE;;   57,$45,$44,$47,$45 .BYTE $00;2 PRINT"{DOWN}   BY DAVID A. HOOK" .WORD $0434 .WORD $0002 .BYTE $99,$22,$11,$20,$20,$20,$42,$59,$20 .BYTE $44,$41,$56,$49,$44,$20,$41,$2E,$20 .BYTE $48,$4F,$4F,$4B .BYTE $00;3 PRINT"{DOWN} >        DISK STATUS" .WO .BYTE $20,$20,$20,$4F,$52,$20,$43,$4F,$4D,$4D .BYTE $41,$4E,$44 .BYTE $00;5 PRINT"{DOWN} >$       DIRECTORY":PRINT" @$"  .WORD $048F .WORD $0005 .BYTE $99,$22,$11,$20,$3E,$24,$20,$20,$20,$20 .BYTE $20,$20,$20,$44,$49,$52,$45,$43,$54,$4F .BYTE $RD $04BD .WORD $0007 .BYTE $85,$22,$11,$11,$44,$45,$56,$49,$43,$45 .BYTE $20,$20,$38,$9D,$9D,$9D,$22,$3B,$44 .BYTE $00;8 A=PEEK(43)+256*PEEK(44):POKEA+589,D:POKEA+621,D:POKEA+667,D:POKEA+683,D  .WORD $04F7 .WORD $0008 .BYTE $41,$B2,$C2,$28,$34,$3.WORD $0504 .WORD $0009 .BYTE $9E,$41,$AA,$32,$36,$36,$3A,$A2 .BYTE $00 .WORD $0000;*********************************; CODE TO PROTECT WEDGE FROM BASIC; BY ADJUSTING BASIC RAM TO AREA; PAST WEDGE;*********************************.LIB MOVBASICE. ORD $04BD .WORD $0007 .BYTE $85,$22,$11,$11,$44,$45,$56,$49,$43,$45 .BYTE $20,$20,$38,$9D,$9D,$9D,$22,$3B,$44 .BYTE $00;8 A=PEEK(43)+256*PEEK(44):POKEA+589,D:POKEA+621,D:POKEA+667,D:POKEA+683,D  .WORD $04F7 .WORD $0008 .BYTE $41,$B2,$C2,$28,$34,$     VERSION V4.1/071382;      BY BOB FAIRBAIRN;        COPYRIGHT 1982;  COMMODORE BUSINESS MACHINES;;  DOCUMENTED BY DENTON MARLOWE;;*********************************; BASIC STUB;********************************;1 PRINT"{CLEAR}{DOWN}      VIC K(43)+256*PEEK(44):POKEA+589,D:POKEA+621,D:POKEA+667,D:POKEA+683,D ;9 SYSA+266:NEW ;********************************;1 PRINT"{CLEAR}{DOWN}      VIC WEDGE" .WORD $0419 .WORD $0001 .BYTE $99,$22,$93,$11,$20,$20,$20,$20,$20,$20 .BYTE $56,$49,$43,$20,ORD $0451 .WORD $0003 .BYTE $99,$22,$11,$20,$3E,$20,$20,$20,$20 .BYTE $20,$20,$20,$20,$44,$49,$53,$4B,$20 .BYTE $53,$54,$41,$54,$55,$53 .BYTE $00;4 PRINT" @         OR COMMAND" .WORD $046D .WORD $0004 .BYTE $99,$22,$20,$40,$20,$20,$20,$20,$20,$2$52,$59,$22,$3A,$99,$22,$20,$40,$24 .BYTE $00;6 PRINT"{DOWN} /FILE    LOAD"  .WORD $04A5 .WORD $0006 .BYTE $99,$22,$11,$20,$2F,$46,$49,$4C,$45,$20 .BYTE $20,$20,$20,$4C,$4F,$41,$44 .BYTE $00;7 INPUT"{DOWN}{DOWN}DEVICE  8{LEFT}{LEFT}{LEFT}";D  .W   VERSION V4.1/071382;      BY BOB FAIRBAIRN;        COPYRIGHT 1982;  COMMODORE BUSINESS MACHINES;;  DOCUMENTED BY DENTON MARLOWE;;*********************************; BASIC STUB;*********************************;1 PRINT"{CLEAR}{DOWN}      VIC W(43)+256*PEEK(44):POKEA+589,D:POKEA+621,D:POKEA+667,D:POKEA+683,D ;9 SYSA+266:NEW ;********************************;1 PRINT"{CLEAR}{DOWN}      VIC WEDGE" .WORD $0419 .WORD $0001 .BYTE $99,$22,$93,$11,$20,$20,$20,$20,$20,$20 .BYTE $56,$49,$43,$20,$RD $0451 .WORD $0003 .BYTE $99,$22,$11,$20,$3E,$20,$20,$20,$20 .BYTE $20,$20,$20,$20,$44,$49,$53,$4B,$20 .BYTE $53,$54,$41,$54,$55,$53 .BYTE $00;4 PRINT" @         OR COMMAND" .WORD $046D .WORD $0004 .BYTE $99,$22,$20,$40,$20,$20,$20,$20,$20,$2052,$59,$22,$3A,$99,$22,$20,$40,$24 .BYTE $00;6 PRINT"{DOWN} /FILE    LOAD"  .WORD $04A5 .WORD $0006 .BYTE $99,$22,$11,$20,$2F,$46,$49,$4C,$45,$20 .BYTE $20,$20,$20,$4C,$4F,$41,$44 .BYTE $00;7 INPUT"{DOWN}{DOWN}DEVICE  8{LEFT}{LEFT}{LEFT}";D  .WO3,$29,$AA,$32,$35 .BYTE $36,$AC,$C2,$28,$34,$34,$29,$3A,$97,$41 .BYTE $AA,$35,$38,$39,$2C,$44,$3A,$97,$41,$AA .BYTE $36,$32,$31,$2C,$44,$3A,$97,$41,$AA,$36 .BYTE $36,$37,$2C,$44,$3A,$97,$41,$AA,$36,$38 .BYTE $33,$2C,$44 .BYTE $00;9 SYSA+266:NEW   ASM;*********************************; MAIN BODY OF CODE;*********************************.FIL DOS41.ASM;*********************************.END*********************.END SYS 48128;*********************************;;       DOS 4.1E DISK WEDGE;; .PAGE 'DOS 4.1E DISK WEDGE'.OPT NOLIST;*********************************;* = $0401   ; 3K EXPANSION;* = $1001   ; NO EXPANSION* = $1201    ; 32K EXPANSION;* = $BC00   ; SYS 48128;*********************************;;       DOS 4.1E DISK WEDGE;; WEDGE";2 PRINT"{DOWN}   BY DAVID A. HOOK";3 PRINT"{DOWN} >        DISK STATUS";4 PRINT" @         OR COMMAND";5 PRINT"{DOWN} >$       DIRECTORY":PRINT" @$" ;6 PRINT"{DOWN} /FILE    LOAD" ;7 INPUT"{DOWN}{DOWN}DEVICE  8{LEFT}{LEFT}{LEFT}";D ;8 A=PEE$57,$45,$44,$47,$45 .BYTE $00;2 PRINT"{DOWN}   BY DAVID A. HOOK" .WORD $0434 .WORD $0002 .BYTE $99,$22,$11,$20,$20,$20,$42,$59,$20 .BYTE $44,$41,$56,$49,$44,$20,$41,$2E,$20 .BYTE $48,$4F,$4F,$4B .BYTE $00;3 PRINT"{DOWN} >        DISK STATUS" .W	0 .BYTE $20,$20,$20,$4F,$52,$20,$43,$4F,$4D,$4D .BYTE $41,$4E,$44 .BYTE $00;5 PRINT"{DOWN} >$       DIRECTORY":PRINT" @$"  .WORD $048F .WORD $0005 .BYTE $99,$22,$11,$20,$3E,$24,$20,$20,$20,$20 .BYTE $20,$20,$20,$44,$49,$52,$45,$43,$54,$4F .BYTE EDGE";2 PRINT"{DOWN}   BY DAVID A. HOOK";3 PRINT"{DOWN} >        DISK STATUS";4 PRINT" @         OR COMMAND";5 PRINT"{DOWN} >$       DIRECTORY":PRINT" @$" ;6 PRINT"{DOWN} /FILE    LOAD" ;7 INPUT"{DOWN}{DOWN}DEVICE  8{LEFT}{LEFT}{LEFT}";D ;8 A=PEEKA          VIC DOS 4.12ATEST             BDOS41E              BCDOS41.ASM             BCDOS41NL.ASM             DOS41.ASM         )    DOS41.OBJ             DOS41             TEST          KK  BDOS41E.ASM            BDOS41ENL.ASM             MOVBASICE.ASM            DOS41.ASM            BDOS41E.OBJ         	   BDOS41E             TEST                                          KKKKKKKKKKKKKK
; DOS41.E;*********************************;;*********************************INDEX  = $0022INDEX2 = $0024VARTOP = $002BFRETOP = $0033MEMSIZ = $0037;********************************; CHARGET EQUATES;********************************ZCHRGT = $0$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA .BYTE $EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA .BYTE $EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA .BYTE $EA,$EA,$EA,$EA,$EA ;********************************; ;******EXPANSION;*=$110B ; NO EXPANSION;********************************; ADJUST BASIC MEMORY MAP TO; PROTECT WEDGE AT ITS LOAD; ADDRESS;********************************ZZ050B LDA MEMSIZ       SEC        SBC #$33      ;'3'       STA MEMSIZ       STA  C483 BASIC WARM START;********************************       LDA STACK+1,X       CMP #<CHRGEC-1 ;#$8C $C48C       BNE XX0648       LDA STACK+2,X       CMP #>CHRGEC ;#$C4       BNE XX0648;********************************; CHECK COMMAND;*********+1       INX        STA INDEX2       STX INDEX2+1       LDX #$01XX0534 LDA (INDEX),Y       STA (INDEX2),Y       DEY        BNE XX0534       DEX        BEQ XX0540       BMI XX054CXX0540 LDA (INDEX),Y       STA (INDEX2),Y       DEC INDEX2+1 ADDRESS EQUATES;********************************PRTLIN=$DDCDCLOAD =$E195WARMBS=$E467KCHROT=$E742;********************************; EXTERNAL ADDRESS EQUATES;********************************SECOND = $FF93TKSA   = $FF96ACPTR  = $FFA5CIOUT  = $FFINY        BNE XX0558       INX XX0558 STY ZCHRGT+1       STX ZCHRGT+2       RTS;********************************; FILLER BYTES (NOP) TO PAD MEMORY; FOR START OF WEDGE ON BOUNDARY;********************************ZZ055D = *  .BYTE $EA,$EA,$EA,$****************************RCHRGT = $79 ;JUMP BACK INTI CHRGETTXTPTR = $7A ;CHRGET POINTER;*********************************; DISK I/O ADDRESS;*********************************STATUS = $90 ;KERNAL I/O STATUSPRTY   = $9B ;USED FOR TEMPORARY STORAG @
  BOOT DOS * A0A1:"DOS41",8,1 < A148128:                                                                                                                                                                                                  A,$EA,$EA .BYTE $EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA .BYTE $EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA .BYTE $EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA .BYTE $EA,$EA,$EA,$EA,$EA,$EA,073;********************************;* = $0509 ; 3K EXPANSION;* = $1109 ; NO EXPANSION;********************************; FILLER BYTES;********************************FILLER .BYTE $EA,$EA,$EA,$EA,$EA;********************************;*=$050B ; 3K   **************************.END***;;       DOS 4.1E DISK WEDGE;;      VERSION V4.1/071382;      BY BOB FAIRBAIRN;        COPYRIGHT 1982;  COMMODORE BUSINESS MACHINES;;  DOCUMENTED BY DENTON MARLOWE;;********************************; EXTERNAL FRETOP       LDA MEMSIZ+1       SBC #$01       STA MEMSIZ+1       STA FRETOP+1       LDY #$33      ;'3'       LDA VARTOP       LDX VARTOP+1       INX        INX        INX        STA INDEX       STX INDEX+1       LDA MEMSIZ       LDX MEMSIZ;*********************************;;       DOS 4.1E DISK WEDGE;;      VERSION V4.1/071382;      BY BOB FAIRBAIRN;        COPYRIGHT 1982;  COMMODORE BUSINESS MACHINES;;  DOCUMENTED BY DENTON MARLOWE;;********************************; EXTERNAL       DEC INDEX+1       LDY #$00       BEQ XX0534;********************************; PATCH CHRGET WITH JMP TO WEDGE;********************************XX054C LDA #$4C      ; OPCODE FOR JMP       STA ZCHRGT       LDY MEMSIZ       LDX MEMSIZ+1       A8UNTLK  = $FFABUNLSN  = $FFAELISTEN = $FFB1TALK   = $FFB4SETLFS = $FFBASETNAM = $FFBDOPEN   = $FFC0CLOSE  = $FFC3CLRCHN = $FFCCCHROUT = $FFD2LOAD   = $FFD5STOP   = $FFE1GETIN  = $FFE4;********************************; CHRGET EQUATES;****	EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA .BYTE $EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA .BYTE $EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA .BYTE $EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EA,$EE;*********************************;;*********************************STACK  = $0100 ;6502 PROCESSOR STACK;*********************************; BASIC ROM ADDRESSES;*********************************CHRGEC = $C48D ;CALL TO CHRGET FROM DIRECT MODE;********************************;;********************************WEDGE  INC TXTPTR       BNE XX0608       INC TXTPTR+1XX0608 STX PRTY       TSX ;********************************; CHECK WHERE WE WERE CALLED FROM; $C48D - 1 CALL TO CHRGET FROM; $
***********************       LDA TXTPTR       BNE XX0645  ;IF HIBYTE POINTER NON ZERO EXIT;       LDA TXTPTR+1       CMP #$02    ;DIRECT MODE       BNE XX0645  ;NO EXIT;       LDY #$00   ;SET INDEX=0       STY PRTY   ;SAVE;********************KBEQ XX068D;       BNE XX0645;********************************;;********************************XX063A INY        LDA (TXTPTR),Y       BEQ XX066B;********************************; CHECK DIRECTORY COMMAND $;********************************            LDA $B1       JSR PRTLIN       LDA #$20      ;' '       BNE XX06E5;********************************XX06DF BNE LOADIT;********************************; DONE.;********************************XX06E1 BNE ENDER;****************************************XX0645 JMP RCHRGT;********************************; NOT OUR COMMAND ; RETURN TO CHRGET TO PROCESS COMMAND;********************************XX0648 LDX PRTY ; RECOVERY X REG       JMP RCHRGT;********************************; @ OR / READ D**********       CMP #$00       BEQ XX070B       JSR CHROUT       JSR STOP       BEQ ENDER;********************************       JSR GETIN       BEQ XX06E8       CMP #$20      ;' '       BNE XX06E8XX0704 JSR GETIN       BEQ XX0704       BNE       CLV        BVC XX068A;XX066B STY TXTPTR       LDA #$08       JSR TALK       LDA #$6F       JSR TKSA;********************************; READ IN STATUS BYTES 00, OK,00,00;********************************XX0677 JSR ACPTR       CMP #$0D        JSR CLOSE  ;CLOSE       PLA        ;PULL RTS ADDRESS       PLA       JMP WARMBS;********************************; /FILENAME - LOAD FILENAME;********************************LOADIT LDA #$0E       LDY #$00       JSR SETLFS       LDA #$00     XX068D       DEY        TYA        LDX #$01       LDY #$02       JSR SETNAM;********************************       LDX #$08       LDA PRTY       BNE XX06DF;       LDA #$0E       LDY #$60       JSR SETLFS;********************************  K************; CHECK COMMAND; @ OR > OR /;********************************       LDA (TXTPTR),Y       CMP #$3E      ;'>'       BEQ XX063A;       CMP #$40      ;'@'       BEQ XX063A;       INY        STA PRTY;       CMP #$2F      ;'/'       STATUS       BNE XX06E1;********************************       JSR ACPTR       STA $B1       LDY STATUS       BNE XX06E1;********************************       LDY $B7       DEY        BNE RFILNM;********************************       LDX $B0  CMP #$24      ;'$'       BEQ XX068D;********************************; CHECK STATUS COMMAND ONLY;********************************       BNE XX064D;********************************; NO COMMAND - PASS BACK TO PROCESSING LOOP;************************; LOOP BACK TO READ MORE CHARACTERS;********************************XX06E3 BNE RFILNM;********************************;;********************************XX06E5 JSR CHROUTXX06E8 JSR ACPTR       LDX STATUS       BNE ENDER;**********************RIVE STATUS;********************************XX064D LDA #$08       JSR LISTEN       LDA #$6F       JSR SECOND;XX0657 INC TXTPTR       LDY #$00       LDA (TXTPTR),Y       BEQ XX0665       JSR CIOUT       CLV        BVC XX0657XX0665 JSR UNLSN XX06E8XX070B LDA #$0D       JSR CHROUT       LDY #$02       BNE XX06E3;********************************; DONE CLOSE CLEAR AND CLOSE CHANNEL;********************************ENDER  JSR CLRCHN ;CLEAR I/O CHANNELS       LDA #$0E   ;DRIVE CHANNEL      BEQ XX0684       JSR KCHROT       CLV        BVC XX0677XX0684 JSR KCHROT       JSR UNTLKXX068A JMP RCHRGT;********************************; @$ OR /$ LIST DIRECTORY;********************************XX068D INY        LDA (TXTPTR),Y       BNE    LDX VARTOP       LDY VARTOP+1       JSR LOAD;********************************; BASIC CLEANUP AFTER LOAD;********************************       JMP CLOAD;********************************;.END      JSR OPEN;********************************       LDA #$08       JSR TALK       LDA #$60       JSR TKSA       LDA #$00       STA STATUS       LDY #$03;********************************RFILNM STY $B7       JSR ACPTR       STA $B0       LDY KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK